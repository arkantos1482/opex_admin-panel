import axios from "axios";

const Superset = axios.create({
    baseURL: window.env.REACT_APP_SUPERSET_URL,
    timeout: 15000,
});


export const GetSupersetAccessToken = () => {
    const payload = {
        "password":"admin",
        "provider":"db",
        "refresh":true,
        "username":"admin"
    }
    return Superset.post(`/api/v1/security/login`, payload)
}

export const GetTotalOrders = (supersetToken) => {
    Superset.defaults.headers.common['Authorization'] = `Bearer ${supersetToken}`;
    const payload = {"datasource":{"id":24,"type":"table"},"force":false,"queries":[{"time_range":"No filter","granularity":"create_date","filters":[],"extras":{"time_grain_sqla":"P1D","having":"","having_druid":[],"where":""},"applied_time_extras":{},"columns":[],"metrics":[{"aggregate":"COUNT","column":{"advanced_data_type":null,"certification_details":null,"certified_by":null,"column_name":"id","description":null,"expression":null,"filterable":true,"groupby":true,"id":763,"is_certified":false,"is_dttm":false,"python_date_format":null,"type":"INTEGER","type_generic":0,"verbose_name":null,"warning_markdown":null},"expressionType":"SIMPLE","hasCustomLabel":false,"isNew":false,"label":"COUNT(id)","optionName":"metric_23yrkrt7dig_k94rvhqgt3s","sqlExpression":null}],"annotation_layers":[],"timeseries_limit":0,"order_desc":true,"url_params":{"form_data_key":"c89xY-LscESgWDaBEO1mZQKCqYKqLxY0IJLjL_OPvdgjkOJIQNv8cyad-pg8UKmj","slice_id":"134"},"custom_params":{},"custom_form_data":{},"is_timeseries":true,"post_processing":[{"operation":"pivot","options":{"index":["__timestamp"],"columns":[],"aggregates":{"COUNT(id)":{"operator":"mean"}},"drop_missing_columns":false,"flatten_columns":false,"reset_index":false}},null,null,{"operation":"flatten"}]}],"form_data":{"datasource":"24__table","viz_type":"big_number","slice_id":134,"url_params":{"form_data_key":"c89xY-LscESgWDaBEO1mZQKCqYKqLxY0IJLjL_OPvdgjkOJIQNv8cyad-pg8UKmj","slice_id":"134"},"granularity_sqla":"create_date","time_grain_sqla":"P1D","time_range":"No filter","metric":{"aggregate":"COUNT","column":{"advanced_data_type":null,"certification_details":null,"certified_by":null,"column_name":"id","description":null,"expression":null,"filterable":true,"groupby":true,"id":763,"is_certified":false,"is_dttm":false,"python_date_format":null,"type":"INTEGER","type_generic":0,"verbose_name":null,"warning_markdown":null},"expressionType":"SIMPLE","hasCustomLabel":false,"isNew":false,"label":"COUNT(id)","optionName":"metric_23yrkrt7dig_k94rvhqgt3s","sqlExpression":null},"adhoc_filters":[],"show_timestamp":true,"show_trend_line":true,"start_y_axis_at_zero":true,"color_picker":{"a":1,"b":137,"g":193,"r":90},"header_font_size":0.4,"subheader_font_size":0.15,"y_axis_format":"SMART_NUMBER","time_format":"smart_date","rolling_type":"None","extra_form_data":{},"force":null,"result_format":"json","result_type":"full"},"result_format":"json","result_type":"full"}
    return Superset.post(`/api/v1/chart/data`, payload)
}

export const GetTotalTrades = (supersetToken) => {
    Superset.defaults.headers.common['Authorization'] = `Bearer ${supersetToken}`;
    const payload = {"datasource":{"id":25,"type":"table"},"force":false,"queries":[{"time_range":"No filter","granularity":"trade_date","filters":[],"extras":{"time_grain_sqla":"P1D","having":"","having_druid":[],"where":""},"applied_time_extras":{},"columns":[],"metrics":[{"aggregate":"COUNT","column":{"advanced_data_type":null,"certification_details":null,"certified_by":null,"column_name":"id","description":null,"expression":null,"filterable":true,"groupby":true,"id":783,"is_certified":false,"is_dttm":false,"python_date_format":null,"type":"INTEGER","type_generic":0,"verbose_name":null,"warning_markdown":null},"expressionType":"SIMPLE","hasCustomLabel":false,"isNew":false,"label":"COUNT(id)","optionName":"metric_mj3d0qyo07h_nlz57z8jw9r","sqlExpression":null}],"annotation_layers":[],"timeseries_limit":0,"order_desc":true,"url_params":{"form_data_key":"kF9VNcBanNAEBkjrs93UPERhp-gCLSEaIDbc9-EoNjbuldF-wsipqXYyy0DnlJy0","slice_id":"137"},"custom_params":{},"custom_form_data":{},"is_timeseries":true,"post_processing":[{"operation":"pivot","options":{"index":["__timestamp"],"columns":[],"aggregates":{"COUNT(id)":{"operator":"mean"}},"drop_missing_columns":false,"flatten_columns":false,"reset_index":false}},{"operation":"flatten"}]}],"form_data":{"datasource":"25__table","viz_type":"big_number","slice_id":137,"url_params":{"form_data_key":"kF9VNcBanNAEBkjrs93UPERhp-gCLSEaIDbc9-EoNjbuldF-wsipqXYyy0DnlJy0","slice_id":"137"},"granularity_sqla":"trade_date","time_grain_sqla":"P1D","time_range":"No filter","metric":{"aggregate":"COUNT","column":{"advanced_data_type":null,"certification_details":null,"certified_by":null,"column_name":"id","description":null,"expression":null,"filterable":true,"groupby":true,"id":783,"is_certified":false,"is_dttm":false,"python_date_format":null,"type":"INTEGER","type_generic":0,"verbose_name":null,"warning_markdown":null},"expressionType":"SIMPLE","hasCustomLabel":false,"isNew":false,"label":"COUNT(id)","optionName":"metric_mj3d0qyo07h_nlz57z8jw9r","sqlExpression":null},"adhoc_filters":[],"compare_lag":"","compare_suffix":"","show_timestamp":true,"show_trend_line":true,"start_y_axis_at_zero":true,"color_picker":{"a":1,"b":68,"g":127,"r":255},"header_font_size":0.4,"subheader_font_size":0.15,"y_axis_format":"SMART_NUMBER","time_format":"smart_date","rolling_type":"None","extra_form_data":{},"force":null,"result_format":"json","result_type":"full"},"result_format":"json","result_type":"full"}
    return Superset.post(`/api/v1/chart/data`, payload)
}
export const NumberOfTradesByPair = (supersetToken) => {
    Superset.defaults.headers.common['Authorization'] = `Bearer ${supersetToken}`;
    const payload = {"datasource":{"id":24,"type":"table"},"force":false,"queries":[{"time_range":"No filter","granularity":"create_date","filters":[],"extras":{"time_grain_sqla":"P1D","having":"","having_druid":[],"where":""},"applied_time_extras":{},"columns":["symbol"],"metrics":[{"aggregate":"COUNT","column":{"advanced_data_type":null,"certification_details":null,"certified_by":null,"column_name":"id","description":null,"expression":null,"filterable":true,"groupby":true,"id":763,"is_certified":false,"is_dttm":false,"python_date_format":null,"type":"INTEGER","type_generic":0,"verbose_name":null,"warning_markdown":null},"expressionType":"SIMPLE","hasCustomLabel":false,"isNew":false,"label":"COUNT(id)","optionName":"metric_6md1nf6j36y_yb4kf8kaej9","sqlExpression":null}],"orderby":[[{"aggregate":"COUNT","column":{"advanced_data_type":null,"certification_details":null,"certified_by":null,"column_name":"id","description":null,"expression":null,"filterable":true,"groupby":true,"id":763,"is_certified":false,"is_dttm":false,"python_date_format":null,"type":"INTEGER","type_generic":0,"verbose_name":null,"warning_markdown":null},"expressionType":"SIMPLE","hasCustomLabel":false,"isNew":false,"label":"COUNT(id)","optionName":"metric_6md1nf6j36y_yb4kf8kaej9","sqlExpression":null},false]],"annotation_layers":[],"row_limit":10000,"series_columns":["symbol"],"timeseries_limit":0,"order_desc":true,"url_params":{"form_data_key":"4MpeVQSFtXd0kvNTyH4cIjhKC9nah703_bj-NuTAKRJKntjReGLVCduQ70yxUhPy","slice_id":"135"},"custom_params":{},"custom_form_data":{},"is_timeseries":true,"time_offsets":[],"post_processing":[{"operation":"pivot","options":{"index":["__timestamp"],"columns":["symbol"],"aggregates":{"COUNT(id)":{"operator":"mean"}},"drop_missing_columns":false,"flatten_columns":false,"reset_index":false}},{"operation":"rename","options":{"columns":{"COUNT(id)":null},"level":0,"inplace":true}},{"operation":"flatten"}]}],"form_data":{"datasource":"24__table","viz_type":"echarts_timeseries_smooth","slice_id":135,"url_params":{"form_data_key":"4MpeVQSFtXd0kvNTyH4cIjhKC9nah703_bj-NuTAKRJKntjReGLVCduQ70yxUhPy","slice_id":"135"},"granularity_sqla":"create_date","time_grain_sqla":"P1D","time_range":"No filter","metrics":[{"aggregate":"COUNT","column":{"advanced_data_type":null,"certification_details":null,"certified_by":null,"column_name":"id","description":null,"expression":null,"filterable":true,"groupby":true,"id":763,"is_certified":false,"is_dttm":false,"python_date_format":null,"type":"INTEGER","type_generic":0,"verbose_name":null,"warning_markdown":null},"expressionType":"SIMPLE","hasCustomLabel":false,"isNew":false,"label":"COUNT(id)","optionName":"metric_6md1nf6j36y_yb4kf8kaej9","sqlExpression":null}],"groupby":["symbol"],"adhoc_filters":[],"order_desc":true,"row_limit":10000,"rolling_type":null,"comparison_type":"values","annotation_layers":[],"forecastPeriods":10,"forecastInterval":0.8,"x_axis_title_margin":15,"y_axis_title_margin":15,"y_axis_title_position":"Left","color_scheme":"d3Category20","only_total":true,"markerSize":6,"show_legend":true,"legendType":"scroll","legendOrientation":"top","x_axis_time_format":"smart_date","rich_tooltip":true,"tooltipTimeFormat":"smart_date","y_axis_format":"SMART_NUMBER","y_axis_bounds":[null,null],"extra_form_data":{},"force":null,"result_format":"json","result_type":"full"},"result_format":"json","result_type":"full"}
    return Superset.post(`/api/v1/chart/data`, payload)
}


